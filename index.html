<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>üíò Propuesta San Valent√≠n</title>
  <style>
    :root{
      --bg1:#0b1020;
      --bg2:#1a0b2e;
      --card:#ffffff10;
      --stroke:#ffffff20;
      --text:#fff;
      --muted:#ffffffb3;
      --yes:#ff4d8d;
      --yes2:#ff7ab3;
      --no:#ffffff1f;
      --noStroke:#ffffff35;
    }
    *{box-sizing:border-box}
    body{
      margin:0; min-height:100svh; display:grid; place-items:center;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 800px at 20% 10%, #ff4d8d30, transparent 60%),
        radial-gradient(1200px 800px at 80% 20%, #7c3aed33, transparent 55%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      overflow:hidden;
    }

    /* Corazones de fondo */
    .hearts {
      position:fixed; inset:0; pointer-events:none; opacity:.9;
      filter: drop-shadow(0 6px 12px #00000055);
    }
    .heart {
      position:absolute;
      width:12px; height:12px;
      transform: rotate(45deg);
      background: #ff4d8d;
      border-radius: 3px;
      animation: floatUp linear infinite;
      opacity:.8;
    }
    .heart::before, .heart::after{
      content:""; position:absolute; width:12px; height:12px;
      background:#ff4d8d; border-radius:50%;
    }
    .heart::before{ left:-6px; top:0; }
    .heart::after{ top:-6px; left:0; }

    @keyframes floatUp {
      from { transform: translateY(20px) rotate(45deg); opacity:0; }
      10% { opacity:.85; }
      to { transform: translateY(-120vh) rotate(45deg); opacity:0; }
    }

    .card{
      width:min(560px, 92vw);
      background: linear-gradient(180deg, #ffffff14, #ffffff0c);
      border:1px solid var(--stroke);
      border-radius:22px;
      padding:22px 18px 18px;
      backdrop-filter: blur(10px);
      box-shadow: 0 18px 60px #00000055;
      position:relative;
    }

    .badge{
      display:inline-flex; gap:8px; align-items:center;
      padding:8px 12px;
      border:1px solid var(--stroke);
      border-radius:999px;
      background:#ffffff0d;
      color:var(--muted);
      font-size:13px;
    }

    h1{
      margin:14px 0 6px;
      font-size: clamp(22px, 3.4vw, 34px);
      line-height:1.1;
      letter-spacing:.2px;
    }
    p{
      margin: 0 0 14px;
      color: var(--muted);
      line-height:1.45;
      font-size: 15.5px;
    }

    .type{
      min-height: 24px;
      font-weight:600;
      color:#fff;
    }

    .actions{
      margin-top:14px;
      display:flex; gap:12px; flex-wrap:wrap;
      justify-content:center;
      position:relative;
      padding: 8px 0 2px;
    }

    button{
      border:0;
      padding: 12px 16px;
      border-radius: 14px;
      font-weight: 700;
      cursor:pointer;
      transition: transform .12s ease, filter .12s ease, box-shadow .12s ease;
      user-select:none;
      min-width: 140px;
    }
    button:active{ transform: scale(.98); }

    .yes{
      background: linear-gradient(135deg, var(--yes), var(--yes2));
      color:#fff;
      box-shadow: 0 12px 28px #ff4d8d40;
    }
    .yes:hover{ filter:brightness(1.05); transform: translateY(-1px); }

    .no{
      background: var(--no);
      border:1px solid var(--noStroke);
      color:#fff;
      box-shadow: 0 10px 26px #0000002d;
      position:relative;
    }
    .no:hover{ transform: translateY(-1px); }

    .footer{
      margin-top:14px;
      display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap;
      color:#ffffff99;
      font-size:12.5px;
    }
    .footer a{ color:#ffffffcc; text-decoration:none; border-bottom:1px dashed #ffffff66; }
    .footer a:hover{ color:#fff; border-bottom-color:#fff; }

    /* Pantalla final */
    .overlay{
      position:fixed; inset:0; display:none; place-items:center;
      background: #050612cc;
      backdrop-filter: blur(8px);
      z-index: 10;
      padding: 18px;
    }
    .overlay.show{ display:grid; }
    .modal{
      width:min(640px, 94vw);
      border-radius:24px;
      background: linear-gradient(180deg, #ffffff18, #ffffff10);
      border:1px solid #ffffff22;
      box-shadow: 0 30px 90px #00000066;
      padding: 22px 18px 18px;
      position:relative;
      overflow:hidden;
    }
    .modal h2{
      margin: 4px 0 8px;
      font-size: clamp(22px, 3.4vw, 32px);
    }
    .modal p{ margin:0 0 14px; }
    .chips{ display:flex; flex-wrap:wrap; gap:8px; margin: 10px 0 2px;}
    .chip{
      font-size:13px;
      color:#fff;
      background:#ffffff14;
      border:1px solid #ffffff24;
      padding:8px 10px;
      border-radius:999px;
    }
    .close{
      position:absolute; right:12px; top:12px;
      width:40px; min-width:auto; height:40px;
      border-radius:14px;
      background:#ffffff10;
      border:1px solid #ffffff20;
      color:#fff;
      font-size:18px;
      line-height:1;
    }

    canvas#confetti{
      position:fixed; inset:0; pointer-events:none;
      z-index: 9;
    }
  </style>
</head>
<body>
  <div class="hearts" id="hearts"></div>

  <main class="card" aria-live="polite">
    <div class="badge">üíå <span id="toName">Para ti</span> ¬∑ <span id="today"></span></div>

    <h1 id="headline">Tengo una pregunta seria‚Ä¶</h1>
    <p class="type" id="typeLine"></p>
    <p id="subtext">
      Prometo que es una propuesta con cari√±o ü•π  
      (Y s√≠‚Ä¶ el bot√≥n ‚ÄúNo‚Äù es sospechoso).
    </p>

    <div class="actions" id="actions">
      <button class="yes" id="yesBtn">üíñ S√≠, acepto</button>
      <button class="no" id="noBtn">üôà No</button>
    </div>

    <div class="footer">
      <span>Hecho con ‚ù§Ô∏è por <b id="fromName">alguien que te quiere</b></span>
      <span><a href="#" id="editTip">Tip: edita los nombres arriba</a></span>
    </div>
  </main>

  <canvas id="confetti"></canvas>

  <section class="overlay" id="overlay" role="dialog" aria-modal="true" aria-label="Respuesta">
    <div class="modal">
      <button class="close" id="closeBtn" aria-label="Cerrar">‚úï</button>
      <div class="badge">üéâ ¬°Dijo que s√≠!</div>
      <h2 id="finalTitle">Oficialmente: mi San Valent√≠n üíò</h2>
      <p id="finalMsg"></p>

      <div class="chips" id="chips"></div>

      <div class="actions" style="justify-content:flex-end; margin-top:12px;">
        <button class="yes" id="copyBtn">üìã Copiar mensajito</button>
      </div>
      <p style="margin-top:10px; color:#ffffff99; font-size:12.5px;">
        Si quieres, te preparo otra versi√≥n con fotos, m√∫sica y un ‚Äúmini juego‚Äù üòä
      </p>
    </div>
  </section>

  <script>
    // ========= Personaliza aqu√≠ =========
    const CONFIG = {
      toName: "Jelly",                 // ‚Üê nombre de tu pareja
      fromName: "AJ",                  // ‚Üê tu nombre
      question: "¬øQuieres ser mi San Valent√≠n?",
      subline: "Elijo un ‚Äòs√≠‚Äô contigo‚Ä¶ sin apuro, sin ruido. Solo t√∫ y yo.",
      finalTitle: "¬°Yupiiii! üíû",
      finalMsg:
        "Gracias por decir que s√≠. Prometo cuidarte, hacerte re√≠r y seguir construyendo lo nuestro con detalles chiquitos y bonitos. ¬øTe parece si celebramos con una cita especial? üå∑",
      planChips: ["üçø Cine", "üçï Comida rica", "üå∑ Tulipanes", "üì∏ Fotos juntos", "üé∂ Playlist"],
      noPhrases: [
        "¬øSegura? ü•∫",
        "Pi√©nsalo bien‚Ä¶",
        "Yo creo que s√≠ üòå",
        "El bot√≥n ‚ÄòS√≠‚Äô se ve bonito‚Ä¶",
        "√öltima oportunidad üò≥"
      ]
    };

    // ========= Utilidades =========
    const $ = (sel) => document.querySelector(sel);

    // Fecha bonita (Per√∫ / Lima)
    const now = new Date();
    $("#today").textContent = now.toLocaleDateString("es-PE", { weekday:"long", year:"numeric", month:"long", day:"numeric" });

    // Colocar nombres
    $("#toName").textContent = "Para " + CONFIG.toName;
    $("#fromName").textContent = CONFIG.fromName;

    // Texto tipo m√°quina
    const typeEl = $("#typeLine");
    const headline = $("#headline");
    const subtext = $("#subtext");
    const lines = [
      CONFIG.question,
      CONFIG.subline
    ];

    async function typeText(el, text, speed=35){
      el.textContent = "";
      for (let i=0; i<text.length; i++){
        el.textContent += text[i];
        await new Promise(r => setTimeout(r, speed));
      }
    }

    (async () => {
      headline.textContent = "Tengo una pregunta seria‚Ä¶";
      await typeText(typeEl, lines[0], 32);
      await new Promise(r => setTimeout(r, 420));
      subtext.textContent = "(Respira‚Ä¶ ahora mira los botones üòÖ)";
    })();

    // Corazones flotando
    const hearts = $("#hearts");
    function spawnHeart(){
      const h = document.createElement("div");
      h.className = "heart";
      const left = Math.random() * 100;
      const size = 10 + Math.random() * 14;
      const dur = 6 + Math.random() * 6;
      h.style.left = left + "vw";
      h.style.bottom = (-10 - Math.random()*20) + "px";
      h.style.width = size + "px";
      h.style.height = size + "px";
      h.style.animationDuration = dur + "s";
      // variaci√≥n de color ligera
      const hue = 330 + Math.random() * 25;
      h.style.background = `hsl(${hue} 100% 65%)`;
      h.style.setProperty("--c", `hsl(${hue} 100% 65%)`);
      hearts.appendChild(h);
      setTimeout(() => h.remove(), dur*1000);
    }
    setInterval(spawnHeart, 220);

    // Bot√≥n NO que se escapa (en desktop y m√≥vil)
    const noBtn = $("#noBtn");
    const yesBtn = $("#yesBtn");
    const actions = $("#actions");

    let noCount = 0;

    function moveNoButton(){
      noCount++;
      const rect = actions.getBoundingClientRect();
      const btnRect = noBtn.getBoundingClientRect();

      // l√≠mites dentro del contenedor
      const maxX = rect.width - btnRect.width;
      const maxY = 130; // un rango razonable
      const x = Math.max(0, Math.random() * maxX);
      const y = Math.max(0, Math.random() * maxY);

      noBtn.style.position = "absolute";
      noBtn.style.left = x + "px";
      noBtn.style.top = y + "px";

      // Cambiar texto del NO (graciosito)
      const phrase = CONFIG.noPhrases[Math.min(noCount-1, CONFIG.noPhrases.length-1)];
      noBtn.textContent = "üôà " + phrase;

      // Hacer el "S√≠" m√°s tentador
      const scale = 1 + Math.min(noCount, 6) * 0.06;
      yesBtn.style.transform = `scale(${scale})`;
      yesBtn.style.boxShadow = `0 18px 40px #ff4d8d55`;
    }

    // En desktop: al pasar el mouse
    noBtn.addEventListener("mouseenter", moveNoButton);
    // En m√≥vil: al tocar
    noBtn.addEventListener("touchstart", (e) => { e.preventDefault(); moveNoButton(); }, {passive:false});
    // Y si igual logran tocarlo:
    noBtn.addEventListener("click", moveNoButton);

    // S√≠ => pantalla final + confetti
    const overlay = $("#overlay");
    const closeBtn = $("#closeBtn");
    const confettiCanvas = $("#confetti");
    const ctx = confettiCanvas.getContext("2d");

    function resizeCanvas(){
      confettiCanvas.width = window.innerWidth;
      confettiCanvas.height = window.innerHeight;
    }
    window.addEventListener("resize", resizeCanvas);
    resizeCanvas();

    let confetti = [];
    let confettiRunning = false;

    function startConfetti(){
      confetti = Array.from({length: 220}, () => ({
        x: Math.random()*confettiCanvas.width,
        y: -20 - Math.random()*confettiCanvas.height,
        r: 3 + Math.random()*4,
        vy: 2 + Math.random()*6,
        vx: -2 + Math.random()*4,
        rot: Math.random()*Math.PI,
        vr: -0.15 + Math.random()*0.3,
        hue: 320 + Math.random()*60
      }));
      confettiRunning = true;
      requestAnimationFrame(tickConfetti);
      // parar solo despu√©s de un rato
      setTimeout(() => confettiRunning = false, 5200);
    }

    function tickConfetti(){
      ctx.clearRect(0,0,confettiCanvas.width, confettiCanvas.height);
      for (const p of confetti){
        p.x += p.vx; p.y += p.vy; p.rot += p.vr;
        if (p.y > confettiCanvas.height + 30){
          p.y = -30; p.x = Math.random()*confettiCanvas.width;
        }
        ctx.save();
        ctx.translate(p.x, p.y);
        ctx.rotate(p.rot);
        ctx.beginPath();
        ctx.roundRect(-p.r, -p.r, p.r*2, p.r*2, 2);
        ctx.fillStyle = `hsl(${p.hue} 100% 65%)`;
        ctx.fill();
        ctx.restore();
      }
      if (confettiRunning) requestAnimationFrame(tickConfetti);
      else ctx.clearRect(0,0,confettiCanvas.width, confettiCanvas.height);
    }

    // polyfill roundRect si hiciera falta
    if (!CanvasRenderingContext2D.prototype.roundRect) {
      CanvasRenderingContext2D.prototype.roundRect = function(x, y, w, h, r){
        const min = Math.min(w, h) / 2;
        r = Math.min(r, min);
        this.moveTo(x+r, y);
        this.arcTo(x+w, y, x+w, y+h, r);
        this.arcTo(x+w, y+h, x, y+h, r);
        this.arcTo(x, y+h, x, y, r);
        this.arcTo(x, y, x+w, y, r);
        this.closePath();
        return this;
      };
    }

    function openFinal(){
      $("#finalTitle").textContent = CONFIG.finalTitle;
      $("#finalMsg").textContent = CONFIG.finalMsg;

      const chips = $("#chips");
      chips.innerHTML = "";
      for (const c of CONFIG.planChips){
        const span = document.createElement("span");
        span.className = "chip";
        span.textContent = c;
        chips.appendChild(span);
      }

      overlay.classList.add("show");
      startConfetti();
    }

    function closeFinal(){
      overlay.classList.remove("show");
    }

    yesBtn.addEventListener("click", openFinal);
    closeBtn.addEventListener("click", closeFinal);
    overlay.addEventListener("click", (e) => {
      if (e.target === overlay) closeFinal();
    });

    // Copiar mensaje
    $("#copyBtn").addEventListener("click", async () => {
      const text = `${CONFIG.toName}, ¬øquieres ser mi San Valent√≠n? üíò\n\n${CONFIG.finalMsg}\n\n‚Äî ${CONFIG.fromName}`;
      try{
        await navigator.clipboard.writeText(text);
        $("#copyBtn").textContent = "‚úÖ Copiado";
        setTimeout(()=> $("#copyBtn").textContent = "üìã Copiar mensajito", 1400);
      } catch {
        alert("Tu navegador no dej√≥ copiar autom√°tico. Igual puedes seleccionar y copiar manualmente üôÇ");
      }
    });

    // Tip para editar
    $("#editTip").addEventListener("click", (e) => {
      e.preventDefault();
      alert("Edita el objeto CONFIG en el <script> para cambiar nombres, mensajes y opciones üíò");
    });
  </script>
</body>
</html>